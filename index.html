<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber Threat Intelligence Center</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

    <style>
        /* --- PROFI DESIGN SYSTEM --- */
        :root {
            --bg-dark: #0b1120;       /* M√©ly s√∂t√©tk√©k */
            --card-bg: #1e293b;       /* K√°rtya h√°tt√©r */
            --panel-bg: #0f172a;      /* Panelek */
            --text-main: #f1f5f9;     /* Feh√©r */
            --text-muted: #94a3b8;    /* Sz√ºrke */
            --accent: #38bdf8;        /* Neon K√©k */
            --danger: #ef4444;        /* Vesz√©ly Piros */
            --success: #10b981;       /* Z√∂ld */
            --border: #334155;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        /* Anim√°ci√≥ a bet√∂lt√©shez */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-enter {
            animation: fadeIn 0.8s ease-out forwards;
        }

        /* Fejl√©c */
        header {
            background-color: var(--panel-bg);
            border-bottom: 1px solid var(--border);
            padding: 15px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        }
        
        header .brand { font-size: 1.2rem; font-weight: 800; color: var(--text-main); letter-spacing: -0.5px; }
        header .brand span { color: var(--accent); }
        header .status { font-size: 0.8rem; color: var(--success); display: flex; align-items: center; gap: 8px; }
        header .status::before { content: ''; width: 8px; height: 8px; background: var(--success); border-radius: 50%; display: block; box-shadow: 0 0 10px var(--success); }

        /* Layout Grid */
        .container {
            max-width: 1600px;
            margin: 30px auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 320px 1fr; /* Sidebar | Main */
            gap: 25px;
        }

        /* Sidebar St√≠lus */
        .card {
            background-color: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
        }

        .card h2 { font-size: 1rem; text-transform: uppercase; color: var(--text-muted); margin-top: 0; border-bottom: 1px solid var(--border); padding-bottom: 10px; letter-spacing: 1px; }
        .card p, .card li { font-size: 0.9rem; color: var(--text-muted); line-height: 1.6; }
        .card strong { color: var(--accent); }

        /* Terminal Style Code Block */
        .terminal {
            background: #000;
            border: 1px solid #333;
            border-radius: 6px;
            overflow: hidden;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
        }
        .terminal-header {
            background: #333;
            color: #ddd;
            padding: 4px 10px;
            font-size: 0.7rem;
            display: flex;
            justify-content: space-between;
        }
        .terminal-body {
            padding: 15px;
            color: #4ade80; /* Hacker z√∂ld */
        }

        /* KPI Grid */
        .kpi-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .kpi-box {
            background: linear-gradient(180deg, var(--card-bg) 0%, rgba(30,41,59,0.5) 100%);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .kpi-box::after {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 2px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
        }

        .kpi-value { font-size: 2.2rem; font-weight: 800; color: var(--text-main); margin: 5px 0; }
        .kpi-label { font-size: 0.75rem; text-transform: uppercase; color: var(--text-muted); letter-spacing: 1px; }

        /* Visualization Container */
        #viz-dashboard {
            width: 100%;
            background-color: white; /* Vega-Lite chartoknak jobb a feh√©r h√°tt√©r a kontraszt miatt */
            border-radius: 8px;
            padding: 15px;
            border: 1px solid var(--border);
        }

        /* Reszponzivit√°s */
        @media (max-width: 1024px) {
            .container { grid-template-columns: 1fr; }
            .kpi-container { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <header>
        <div class="brand">CYBER<span>INTEL</span> 2024</div>
        <div class="status">SYSTEM OPERATIONAL ‚Ä¢ LIVE DATA</div>
    </header>

    <div class="container animate-enter">
        
        <aside>
            <div class="card">
                <h2>üìÅ Projekt K√ºldet√©s</h2>
                <p>
                    A <strong>P√©nz√ºgyi Oszt√°ly (Finance)</strong> kritikus fenyegetetts√©g√©nek elemz√©se.
                    <br><br>
                    Ez az interakt√≠v m≈±szerfal lehet≈ëv√© teszi a menedzsment sz√°m√°ra, hogy ne csak a t√°mad√°sok sz√°m√°t, 
                    hanem azok <strong>k√∂lts√©gvonzat√°t</strong> √©s <strong>s√∫lyoss√°g√°t</strong> is vizsg√°lja.
                </p>
            </div>

            <div class="card">
                <h2>‚öôÔ∏è Adatstrukt√∫ra (JSON)</h2>
                <p style="margin-bottom: 10px;">Az adatok "Tidy Data" form√°tumban ker√ºltek feldolgoz√°sra:</p>
                <div class="terminal">
                    <div class="terminal-header">
                        <span>data_preview.json</span>
                        <span>RO</span>
                    </div>
                    <div class="terminal-body">
{
  "id": 1042,
  "date": "2023-11-05",
  "type": "Ransomware",
  "severity": "Critical",
  "department": "Finance",
  "cost_impact": 45000
}
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>üõ† Tech Stack</h2>
                <ul style="padding-left: 20px; margin: 0;">
                    <li><strong>Adat:</strong> Kaggle (Simulated)</li>
                    <li><strong>Backend:</strong> Python / Pandas</li>
                    <li><strong>Frontend:</strong> HTML5 / CSS3</li>
                    <li><strong>Viz:</strong> Vega-Lite (Linked Views)</li>
                </ul>
            </div>
        </aside>

        <main>
            <div class="kpi-container">
                <div class="kpi-box">
                    <div class="kpi-label">Elemzett Incidensek</div>
                    <div class="kpi-value">1,240</div>
                </div>
                <div class="kpi-box">
                    <div class="kpi-label">Legmagasabb K√°r</div>
                    <div class="kpi-value" style="color: var(--danger);">$89k</div>
                </div>
                <div class="kpi-box">
                    <div class="kpi-label">Legt√°madottabb R√©szleg</div>
                    <div class="kpi-value" style="color: var(--accent);">Finance</div>
                </div>
            </div>

            <div class="card" style="padding: 0; overflow: hidden; background: transparent; border: none;">
                <h2 style="margin-bottom: 15px; border: none; color: var(--text-main);">
                    üìä Interakt√≠v Elemz≈ë K√∂zpont
                    <span style="display: block; font-size: 0.7em; color: var(--text-muted); text-transform: none; margin-top: 5px;">
                        Haszn√°lat: H√∫zz az egereddel a fels≈ë diagramon (Timeline) egy s√°vot a sz≈±r√©shez!
                    </span>
                </h2>
                
                <div id="viz-dashboard"></div>
            </div>
        </main>

    </div>

    <script type="text/javascript">
        
        // --- 1. ADATGENER√ÅL√ÅS (Hogy ne kelljen k√ºls≈ë f√°jl) ---
        const depts = ['IT', 'HR', 'Finance', 'Sales', 'Marketing'];
        const types = ['Phishing', 'Malware', 'DDoS', 'Ransomware', 'Social Eng'];
        const dataPoints = [];

        for(let i=0; i<800; i++) {
            const m = Math.floor(Math.random() * 12);
            const d = Math.floor(Math.random() * 28) + 1;
            const dept = depts[Math.floor(Math.random() * depts.length)];
            let type = types[Math.floor(Math.random() * types.length)];
            let severity = "Low";
            let cost = Math.floor(Math.random() * 5000);

            // "Csal√°s" a sztori kedv√©√©rt: A P√©nz√ºgyn√©l durv√°bbak a dolgok
            if (dept === 'Finance') {
                if (Math.random() > 0.5) { 
                    type = 'Ransomware'; 
                    severity = 'Critical';
                    cost += 20000 + Math.floor(Math.random() * 50000);
                }
            }
            // IT sok kicsi hiba
            if (dept === 'IT' && Math.random() > 0.7) {
                severity = 'Medium';
                cost = Math.floor(Math.random() * 10000);
            }

            dataPoints.push({
                date: new Date(2023, m, d).toISOString().split('T')[0],
                department: dept,
                type: type,
                severity: severity,
                cost: cost
            });
        }

        // --- 2. VEGA-LITE SPECIFIK√ÅCI√ì (3 DIAGRAM) ---
        const spec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "data": { "values": dataPoints },
            "background": "#ffffff", // Feh√©r h√°tt√©r a chartoknak
            "padding": 20,
            
            // F√ºgg≈ëleges elrendez√©s: Fent Timeline, Alatta a m√°sik kett≈ë
            "vconcat": [
                {
                    // --- 1. TIMELINE (SCATTER) ---
                    "width": "container",
                    "height": 200,
                    "title": "1. Id≈ëvonal √©s K√∂lts√©gek (Jel√∂lj ki itt!)",
                    "mark": "circle",
                    "selection": {
                        "brush": {"type": "interval", "encodings": ["x"]}
                    },
                    "encoding": {
                        "x": {"field": "date", "type": "temporal", "title": "D√°tum"},
                        "y": {"field": "cost", "type": "quantitative", "title": "K√°r ($)"},
                        "color": {
                            "field": "severity",
                            "scale": {"domain": ["Low", "Medium", "Critical"], "range": ["#10b981", "#f59e0b", "#ef4444"]},
                            "legend": {"title": "S√∫lyoss√°g"}
                        },
                        "size": {"value": 50},
                        "tooltip": [
                            {"field": "department", "title": "R√©szleg"},
                            {"field": "cost", "title": "K√∂lts√©g", "format": "$"}
                        ]
                    }
                },
                {
                    // V√≠zszintes elrendez√©s az als√≥ kett≈ënek
                    "hconcat": [
                        {
                            // --- 2. BAR CHART (TYPES) ---
                            "width": 350,
                            "height": 250,
                            "title": "2. T√°mad√°si T√≠pusok (Sz≈±rt)",
                            "transform": [{"filter": {"selection": "brush"}}],
                            "mark": {"type": "bar", "tooltip": true, "cornerRadiusEnd": 4},
                            "encoding": {
                                "y": {"field": "type", "type": "nominal", "title": null, "sort": "-x"},
                                "x": {"aggregate": "count", "title": "Esetsz√°m"},
                                "color": {"value": "#3b82f6"}
                            }
                        },
                        {
                            // --- 3. DONUT CHART (DEPARTMENTS) ---
                            "width": 350,
                            "height": 250,
                            "title": "3. √ârintett R√©szlegek (Sz≈±rt)",
                            "transform": [{"filter": {"selection": "brush"}}],
                            "mark": {"type": "arc", "innerRadius": 50, "tooltip": true},
                            "encoding": {
                                "theta": {"aggregate": "count", "field": "department"},
                                "color": {
                                    "field": "department", 
                                    "scale": {"scheme": "category10"},
                                    "legend": {"title": "R√©szleg"}
                                },
                                "order": {"field": "count", "sort": "descending"}
                            }
                        }
                    ]
                }
            ]
        };

        // Renderel√©s
        vegaEmbed('#viz-dashboard', spec, {actions: false}).catch(console.error);

    </script>
</body>
</html>
