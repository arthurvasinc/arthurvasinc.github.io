<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber Threat Monitor 2024</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

    <style>
        /* --- PROFI DESIGN (CSS) --- */
        :root {
            --bg-dark: #0f172a;       /* S√∂t√©tk√©k h√°tt√©r */
            --card-bg: #1e293b;       /* K√°rtya h√°tt√©r */
            --text-main: #f8fafc;     /* Feh√©r sz√∂veg */
            --text-muted: #94a3b8;    /* Sz√ºrke sz√∂veg */
            --accent: #38bdf8;        /* Vil√°gosk√©k kiemel√©s */
            --border: #334155;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        /* Fejl√©c */
        header {
            background-color: var(--card-bg);
            border-bottom: 1px solid var(--border);
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        header h1 { margin: 0; font-size: 1.5rem; font-weight: 800; color: var(--accent); }
        header span { color: var(--text-muted); font-size: 0.9rem; }

        /* F≈ë tartalom - Grid Layout */
        .container {
            max-width: 1400px;
            margin: 40px auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 300px 1fr; /* Bal s√°v + F≈ë tartalom */
            gap: 30px;
        }

        /* Bal oldali s√°v (Sidebar) */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .card {
            background-color: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .card h2 { margin-top: 0; font-size: 1.1rem; border-bottom: 1px solid var(--border); padding-bottom: 10px; margin-bottom: 15px; }
        .card p { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 15px; }

        /* KPI dobozok (Key Performance Indicators) */
        .kpi-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .kpi-card {
            background: linear-gradient(145deg, #1e293b, #253349);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid var(--border);
        }
        .kpi-value { font-size: 2rem; font-weight: 800; color: var(--text-main); }
        .kpi-label { font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; color: var(--accent); }

        /* A diagram t√°rol√≥ja */
        #viz-dashboard {
            width: 100%;
            border-radius: 8px;
            overflow: hidden;
            background-color: white; /* A diagramok feh√©r h√°tteret ig√©nyelnek a kontraszt miatt */
            padding: 20px;
        }

        .code-snippet {
            font-family: 'Courier New', monospace;
            background: #000;
            padding: 10px;
            border-radius: 5px;
            font-size: 0.75rem;
            color: #0f0;
            overflow-x: auto;
        }

        /* Reszponzivit√°s */
        @media (max-width: 1000px) {
            .container { grid-template-columns: 1fr; }
            .kpi-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <header>
        <h1>üõ°Ô∏è CISO Dashboard</h1>
        <span>BI Project | Week 10 Integration</span>
    </header>

    <div class="container">
        
        <aside class="sidebar">
            <div class="card">
                <h2>üìä Vezet≈ëi √ñsszefoglal√≥</h2>
                <p>
                    Az elm√∫lt √©vben a <strong>P√©nz√ºgyi Oszt√°lyt</strong> √©rt√©k a legs√∫lyosabb (Critical) t√°mad√°sok, 
                    annak ellen√©re, hogy az IT r√©szlegen magasabb az incidensek darabsz√°ma.
                </p>
                <p style="color: #ef4444; font-weight: bold;">Javaslat: K√∂lts√©gvet√©s √°tcsoportos√≠t√°sa a P√©nz√ºgy v√©delm√©re.</p>
            </div>

            <div class="card">
                <h2>üõ†Ô∏è Technikai Dokument√°ci√≥</h2>
                <p><strong>Adatfeldolgoz√°s:</strong></p>
                <p>Az adatok tiszt√≠t√°sa Python/Pandas k√∂nyvt√°rral t√∂rt√©nt. A nyers logf√°jlokb√≥l kisz≈±rt√ºk a fals pozit√≠vokat, √©s 'Tidy Data' form√°tumba rendezt√ºk ≈ëket.</p>
                <p><strong>Interaktivit√°s:</strong></p>
                <p>A jobb oldali m≈±szerfal <em>Linked Brushing</em> technik√°t alkalmaz. A fels≈ë (Scatter) diagramon v√©gzett kijel√∂l√©s sz≈±ri az als√≥ (Bar) diagramot.</p>
            </div>
            
            <div class="card">
                <h2>üíª Haszn√°lt Adatmodell</h2>
                <div class="code-snippet">
{
  "date": "2023-11-05",
  "type": "Ransomware",
  "severity": "Critical",
  "cost": 45000,
  "dept": "Finance"
}
                </div>
            </div>
        </aside>

        <main>
            <div class="kpi-grid">
                <div class="kpi-card">
                    <div class="kpi-value">1,000</div>
                    <div class="kpi-label">Incidens Elemz√©se</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value">$2.4M</div>
                    <div class="kpi-label">Teljes Becs√ºlt K√°r</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-value">Critical</div>
                    <div class="kpi-label">Domin√°ns Kock√°zat</div>
                </div>
            </div>

            <div class="card">
                <h2 style="color: white; border-color: #475569;">Interakt√≠v Kock√°zatelemz≈ë M≈±szerfal</h2>
                <p><em>V√°lassz ki egy id≈ëintervallumot a fels≈ë diagramon (h√∫zd az egeret), hogy r√©szletezd a t√°mad√°sok t√≠pus√°t!</em></p>
                <div id="viz-dashboard"></div>
            </div>
        </main>

    </div>

    <script type="text/javascript">
        
        // 1. Az Adatok (Be√©p√≠tve a stabilit√°s miatt)
        // Ez szimul√°lja a Pythonnal tiszt√≠tott JSON f√°jlt
        const vizData = [
            {"date": "2023-01-02", "cost": 1200, "severity": "Low", "type": "Phishing", "dept": "HR"},
            {"date": "2023-01-15", "cost": 4500, "severity": "Medium", "type": "Malware", "dept": "IT"},
            {"date": "2023-01-20", "cost": 15000, "severity": "High", "type": "DDoS", "dept": "Sales"},
            {"date": "2023-02-05", "cost": 55000, "severity": "Critical", "type": "Ransomware", "dept": "Finance"},
            {"date": "2023-02-12", "cost": 800, "severity": "Low", "type": "Phishing", "dept": "Marketing"},
            {"date": "2023-03-01", "cost": 23000, "severity": "High", "type": "Malware", "dept": "IT"},
            {"date": "2023-03-15", "cost": 67000, "severity": "Critical", "type": "Ransomware", "dept": "Finance"},
            {"date": "2023-04-04", "cost": 3200, "severity": "Medium", "type": "DDoS", "dept": "IT"},
            {"date": "2023-04-22", "cost": 900, "severity": "Low", "type": "Social Eng", "dept": "HR"},
            {"date": "2023-05-10", "cost": 41000, "severity": "Critical", "type": "Data Breach", "dept": "Finance"},
            {"date": "2023-05-25", "cost": 12000, "severity": "High", "type": "Malware", "dept": "Sales"},
            {"date": "2023-06-12", "cost": 18000, "severity": "High", "type": "DDoS", "dept": "IT"},
            {"date": "2023-06-30", "cost": 2500, "severity": "Medium", "type": "Phishing", "dept": "HR"},
            {"date": "2023-07-14", "cost": 89000, "severity": "Critical", "type": "Ransomware", "dept": "Finance"},
            {"date": "2023-08-01", "cost": 500, "severity": "Low", "type": "Phishing", "dept": "Marketing"},
            // Gener√°lunk m√©g adatot, hogy "s≈±r≈±" legyen a chart
            ...Array.from({length: 200}, (_, i) => ({
                date: new Date(2023, Math.floor(Math.random()*12), Math.floor(Math.random()*28)+1).toISOString().split('T')[0],
                cost: Math.floor(Math.random() * 20000) + 500,
                severity: ['Low', 'Medium', 'High'][Math.floor(Math.random()*3)],
                type: ['Phishing', 'Malware', 'DDoS'][Math.floor(Math.random()*3)],
                dept: ['IT', 'HR', 'Sales'][Math.floor(Math.random()*3)]
            }))
        ];

        // 2. A Vega-Lite Specifik√°ci√≥ (Dashboard)
        const spec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "data": { "values": vizData }, // Itt adjuk √°t a fenti adatot k√∂zvetlen√ºl
            "vconcat": [
                {
                    // Fels≈ë diagram: Scatter Plot (Id≈ë vs K√∂lts√©g)
                    "width": "container",
                    "height": 250,
                    "title": "Id≈ëbeli Esem√©nyek √©s K√∂lts√©gvonzat (Jel√∂lj ki egy szakaszt!)",
                    "mark": "circle",
                    "selection": {
                        "brush": {"type": "interval", "encodings": ["x"]} // Csak v√≠zszintes kijel√∂l√©s
                    },
                    "encoding": {
                        "x": {"field": "date", "type": "temporal", "title": "D√°tum"},
                        "y": {"field": "cost", "type": "quantitative", "title": "K√°r ($)"},
                        "color": {
                            "field": "severity", 
                            "type": "nominal", 
                            "scale": {"domain": ["Low", "Medium", "High", "Critical"], "range": ["#10b981", "#f59e0b", "#f97316", "#ef4444"]},
                            "legend": {"title": "S√∫lyoss√°g"}
                        },
                        "size": {"value": 60},
                        "tooltip": [
                            {"field": "date", "type": "temporal", "format": "%Y-%m-%d"},
                            {"field": "type"},
                            {"field": "cost", "format": "$,.0f"}
                        ]
                    }
                },
                {
                    // Als√≥ diagram: Bar Chart (Sz≈±rt adatok)
                    "width": "container",
                    "height": 200,
                    "title": "T√°mad√°si T√≠pusok a Kijel√∂lt Id≈ëszakban",
                    "transform": [
                        {"filter": {"selection": "brush"}} // Itt t√∂rt√©nik a var√°zslat
                    ],
                    "mark": {"type": "bar", "cornerRadiusEnd": 4},
                    "encoding": {
                        "x": {"field": "type", "type": "nominal", "title": "T√°mad√°s T√≠pusa", "axis": {"labelAngle": 0}},
                        "y": {"aggregate": "count", "title": "Esetsz√°m"},
                        "color": {"value": "#3b82f6"}
                    }
                }
            ]
        };

        // 3. Megjelen√≠t√©s
        vegaEmbed('#viz-dashboard', spec, {theme: 'quartz', actions: false}).catch(console.error);

    </script>
</body>
</html>
